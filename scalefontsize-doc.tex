\documentclass{beerydoc}


\begin{document}


\section*{\Large The \pkg{scalefontsize} package}

Scale the font size by a factor

Oliver Beery

Version 0.0.0\quad 18 December 2025


\section{Introduction}

\subsection{About}

The \pkg{scalefontsize} package is a redesign of the \pkg{scalefnt} package.
Like \pkg{scalefnt}, the sole functionality of \pkg{scalefontsize} is to
define a single command, which scales the font size by a factor.

\subsection{Loading the package}

\listheading{Requirements:}
\begin{itemize}
  \item \LaTeXe{} version 2023-11-01 or newer
  \item \pkg{l3kernel} version 2023-11-01 or newer
\end{itemize}


\section{Command}

The syntax \meta{fp expr} has the same meaning as the argument to \cs{fpeval},
which is documented in \pkg{usrguide}.

\begin{function}{\scalefontsize}
  \begin{syntax}
    \cs{scalefontsize} \marg{fp expr}
  \end{syntax}
  Scales the font size and font baselineskip by a factor equal to the result
  of evaluating the \meta{fp expr}.
  The new font baselineskip has no stretch and shrink components.
  Cannot be used in math mode.
  This command is a more robust alternative to \cs{scalefont} from the
  \pkg{scalefnt} package.
\end{function}


\section{Programming}

This package uses \cs{text_declare_purify_equivalent:Nn} to make
\cs{text_purify:n} correctly remove \cs{scalefontsize}.


\section{Improvements to \pkg{scalefnt}}

\listheading{\pkg{scalefontsize} fixes some problems with \pkg{scalefnt}:}
\begin{itemize}
  \item
  \cs{scalefont}\marg{factor} incorrectly calculates the new font baselineskip
  by setting it equal to the current paragraph baselineskip \cs{baselineskip}
  \texttimes{} \meta{factor}.
  This means that, if \cs{linespread} or \cs{baselinestretch} is set with a
  factor that is $\neq\num{1}$, then the factor will be incorrectly applied
  twice when calculating the new \cs{baselineskip}.
  \pkg{scalefontsize} fixes this issue by correctly defining
  \cs{scalefontsize} such that it sets the new font baselineskip equal to the
  current font baselineskip \cs{f@baselineskip} \texttimes{} \meta{factor}.
  \item
  \cs{scalefontsize} uses more accurate floating point arithmetic when
  computing the new font size and font baselineskip.
  (This also removes the stretch and shrink components of the font
  baselineskip, if any, but this functionality is virtually never useful.)
  \item
  \cs{scalefont} is not engine-protected using \cs{NewDocumentCommand}.
  This means that it may needlessly break or blow up in certain situations.
\end{itemize}


\end{document}
